import{S as ee,i as te,s as se,e as r,k as x,t as B,O as ae,c as o,d as n,m as I,a as h,h as q,b as t,f as $,G as e,g as Z,P as N,J as M,Q as le,R as re,n as oe,T as ne,w as ie,U as de}from"../../chunks/index-836e8b2d.js";import{S as F,s as ce}from"../../chunks/sweetalert2.all-b9a31bff.js";import{A as ue}from"../../chunks/config-1bbf0bd3.js";import{c as pe}from"../../chunks/functions-07375a64.js";import"../../chunks/_commonjsHelpers-850449cf.js";function me(w){let f,E,s,d,a,_,S,b,u,O,v,L,A,D,i,U,g,P,j,C,c,H,p,J,R,V,G;return{c(){f=r("link"),E=x(),s=r("section"),d=r("form"),a=r("div"),_=r("h1"),S=B("Log In"),b=x(),u=r("br"),O=x(),v=r("div"),L=r("label"),A=B("Email address"),D=x(),i=r("input"),U=x(),g=r("div"),P=r("label"),j=B("Password"),C=x(),c=r("input"),H=x(),p=r("button"),J=B("Login"),this.h()},l(l){const y=ae('[data-svelte="svelte-1ysstw2"]',document.head);f=o(y,"LINK",{rel:!0,href:!0}),y.forEach(n),E=I(l),s=o(l,"SECTION",{class:!0});var K=h(s);d=o(K,"FORM",{class:!0});var Q=h(d);a=o(Q,"DIV",{class:!0});var m=h(a);_=o(m,"H1",{class:!0});var W=h(_);S=q(W,"Log In"),W.forEach(n),b=I(m),u=o(m,"BR",{}),O=I(m),v=o(m,"DIV",{class:!0});var T=h(v);L=o(T,"LABEL",{for:!0});var z=h(L);A=q(z,"Email address"),z.forEach(n),D=I(T),i=o(T,"INPUT",{type:!0,class:!0,id:!0,"aria-describedby":!0,placeholder:!0}),T.forEach(n),U=I(m),g=o(m,"DIV",{class:!0});var k=h(g);P=o(k,"LABEL",{for:!0});var X=h(P);j=q(X,"Password"),X.forEach(n),C=I(k),c=o(k,"INPUT",{type:!0,class:!0,id:!0,placeholder:!0}),k.forEach(n),H=I(m),p=o(m,"BUTTON",{type:!0,class:!0,style:!0});var Y=h(p);J=q(Y,"Login"),Y.forEach(n),m.forEach(n),Q.forEach(n),K.forEach(n),this.h()},h(){t(f,"rel","icon"),t(f,"href","/img/favicon.png"),document.title="Login",t(_,"class","text-center"),t(L,"for","exampleInputEmail1"),t(i,"type","text"),t(i,"class","form-control my-2"),t(i,"id","exampleInputEmail1"),t(i,"aria-describedby","emailHelp"),t(i,"placeholder","Enter email"),t(v,"class","form-group my-2"),t(P,"for","exampleInputPassword1"),t(c,"type","password"),t(c,"class","form-control my-2"),t(c,"id","exampleInputPassword1"),t(c,"placeholder","Password"),t(g,"class","form-group my-2"),t(p,"type","submit"),t(p,"class","btn btn-danger w-100 mt-2"),$(p,"background-color","#B6D5EB"),$(p,"border-color",":#000"),$(p,"color","#000"),t(a,"class","cover"),t(d,"class","svelte-pgr8qt"),t(s,"class","signup svelte-pgr8qt")},m(l,y){e(document.head,f),Z(l,E,y),Z(l,s,y),e(s,d),e(d,a),e(a,_),e(_,S),e(a,b),e(a,u),e(a,O),e(a,v),e(v,L),e(L,A),e(v,D),e(v,i),N(i,w[0].email),e(a,U),e(a,g),e(g,P),e(P,j),e(g,C),e(g,c),N(c,w[0].password),e(a,H),e(a,p),e(p,J),V||(G=[M(i,"input",w[2]),M(c,"input",w[3]),M(d,"submit",le(w[4]))],V=!0)},p(l,[y]){y&1&&i.value!==l[0].email&&N(i,l[0].email),y&1&&c.value!==l[0].password&&N(c,l[0].password)},i(l){R||re(()=>{R=de(d,ce,{}),R.start()})},o:oe,d(l){n(f),l&&n(E),l&&n(s),V=!1,ne(G)}}}function fe(w,f,E){ie(()=>pe());let s={email:"",password:""};async function d(){let b="";if(s.email==""?b="Email cannot be empty":s.password==""&&(b="Password cannot be empty"),b!="")return F.fire({icon:"error",titleText:b}),!1;await fetch(`${ue}/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(u=>u.json()).then(u=>{console.log(u),u.status?(localStorage.setItem("login",JSON.stringify(u.data.token)),F.fire({icon:"success",titleText:"Welcome Admin"}).then(()=>{window.location.href="/search"})):F.fire({icon:"question",titleText:"Somthing Happened",title:u.message})})}function a(){s.email=this.value,E(0,s)}function _(){s.password=this.value,E(0,s)}return[s,d,a,_,()=>d()]}class ye extends ee{constructor(f){super(),te(this,f,fe,me,se,{})}}export{ye as default};
